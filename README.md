# Calibreä¹¦åº“ + bibié˜…è¯»å™¨

è¿™æ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„webä¹¦åº“ã€‚
1. æ¨é€[Calibre](https://github.com/kovidgoyal/calibre)æ•°æ®åº“ä¸­çš„ä¹¦ç±ã€‚
2. [bibi](https://github.com/satorumurmur/bibi)ä½œä¸ºé˜…è¯»å™¨ã€‚

å› ä¸ºæ”¯æŒCalibreä¹¦ç±åº“çš„[Calibre-web](https://github.com/janeczku/calibre-web)æ— æ³•å¤„ç†å¤æ‚çš„epubæ’ç‰ˆï¼Œè€Œä¸”åœ¨ç§»åŠ¨ç«¯æ˜¯ç¾éš¾çº§çš„è¡¨ç°ã€‚æ‰€ä»¥åˆ¶ä½œäº†è¿™ä¸ªç®€å•çš„ä¹¦æ¶é¡¹ç›®ã€‚

## ä¼˜åŠ¿
- bibié˜…è¯»å™¨æœ‰å¯¹ç«–ç‰ˆæ—¥è¯­ä¹¦åšä¸“é—¨ä¼˜åŒ–ï¼Œåº”å¯¹å„ç§å›¾ç‰‡æ’ç‰ˆä¹Ÿèƒ½åŸºæœ¬æ­£ç¡®å¤„ç†
- Calibreæ˜¯æœ€å¥½ç”¨çš„ä¹¦ç±ç®¡ç†å·¥å…·ï¼
- æ”¯æŒDockeréƒ¨ç½²ï¼Œä¾¿äºå®¹å™¨åŒ–ç®¡ç†

## å®‰è£…å’Œä½¿ç”¨

### å‰ææ¡ä»¶
- Node.js 22+ æˆ– Docker
- Calibreä¹¦ç±åº“

### æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ

1. å…‹éš†æˆ–ä¸‹è½½æœ¬ä»“åº“
   ```bash
   git clone https://github.com/raindrop213/bibi-library.git
   cd bibi-library
   ```

2. æ›´æ–°ä¾èµ–ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   # Linux/macOS
   chmod +x update-deps.sh
   ./update-deps.sh
   
   # Windows
   update-deps.bat
   ```

   æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š
   ```bash
   npm install
   cd frontend && npm install && cd ..
   ```

3. é…ç½®ä¹¦åº“è·¯å¾„ï¼ˆå¯é€‰ï¼‰ï¼š
   - é»˜è®¤ä½¿ç”¨ `./CalibreLib` ç›®å½•
   - å¯é€šè¿‡ç¯å¢ƒå˜é‡ `CALIBRE_LIB_PATH` æŒ‡å®šå…¶ä»–è·¯å¾„
   - æˆ–åˆ›å»º `config.js` æ–‡ä»¶è¿›è¡Œè‡ªå®šä¹‰é…ç½®

4. å¯åŠ¨æœåŠ¡å™¨ï¼š
   ```bash
   node server.js
   ```

### æ–¹å¼äºŒï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

1. å‡†å¤‡ä¹¦åº“ç›®å½•ï¼š
   ```bash
   # å°†ä½ çš„Calibreä¹¦åº“æ–‡ä»¶å¤¹é‡å‘½åä¸º booksï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•
   mv /path/to/your/calibre/library ./books
   ```

2. å¯åŠ¨æœåŠ¡ï¼š
   ```bash
   # ä½¿ç”¨ docker-composeï¼ˆæ¨èï¼‰
   docker-compose up -d
   
   # æˆ–ä½¿ç”¨ npm è„šæœ¬
   npm run docker:build
   npm run docker:run
   ```

3. è®¿é—®åº”ç”¨ï¼šhttp://localhost:4545

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [DOCKER_DEPLOY.md](./DOCKER_DEPLOY.md)

## å¿«é€Ÿå¯åŠ¨

### ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

**Linux/macOS:**
```bash
chmod +x start.sh
./start.sh
```

**Windows:**
```cmd
start.bat
```

### æ‰‹åŠ¨å¯åŠ¨

1. å°†ä½ çš„Calibreä¹¦åº“æ–‡ä»¶å¤¹é‡å‘½åä¸º `books`ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•
2. è¿è¡Œ `docker-compose up -d`
3. è®¿é—® http://localhost:4545

## é…ç½®è¯´æ˜

é¡¹ç›®å·²ç®€åŒ–é…ç½®ï¼Œä¸»è¦å‚æ•°å›ºå®šï¼š

- **ä¹¦åº“è·¯å¾„**: `./books`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„booksæ–‡ä»¶å¤¹ï¼‰
- **ç«¯å£**: `4545`
- **è®¿é—®å¯†ç **: `nsfw`ï¼ˆç”¨äºè®¿é—®é™åˆ¶å†…å®¹ï¼‰

å¦‚éœ€ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥ç¼–è¾‘ `config/default.js` æ–‡ä»¶ã€‚

## è®¿é—®åœ°å€

é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å°†åœ¨ `http://127.0.0.1:4545/` ä¸Šè¿è¡Œã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“š æ”¯æŒCalibreä¹¦åº“ç®¡ç†
- ğŸ“– é›†æˆbibié˜…è¯»å™¨
- ğŸ·ï¸ æ ‡ç­¾è¿‡æ»¤å’Œåˆ†ç±»
- ğŸ” æœç´¢å’Œæ’åºåŠŸèƒ½
- ğŸ“± ç§»åŠ¨ç«¯å‹å¥½
- ğŸ³ Dockerå®¹å™¨åŒ–æ”¯æŒ
- ğŸ”§ çµæ´»çš„é…ç½®ç®¡ç†
- ğŸ–¼ï¸ è‡ªåŠ¨ç¼©ç•¥å›¾ç”Ÿæˆå’Œæ¸…ç†
